<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <link rel="stylesheet" href="../css/style.css">
   <title>Document</title>


</head>

<body>
   <h1>–ó–∞–¥–∞—á–∞ 1. –î–∞–Ω–æ –∫–ª–∞—Å PhoneNumber. –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –¥–æ string, –ø—Ä–∏ —è–∫–æ–º—É –Ω–∞ –æ—Å–Ω–æ–≤—ñ –Ω–æ–º–µ—Ä–∞ –≤–∏–≤–æ–¥–∏—Ç—å—Å—è –æ–ø–µ—Ä–∞—Ç–æ—Ä (050‚Ä¶.  ü°™ MTC, 096‚Ä¶ ü°™ Kyivstar, ‚Ä¶.)</h1>
   <p>—Ä–µ–∑—É–ª—å—Ç–∞—Ç —É –∫–æ–Ω—Å–æ–ª—ñ</p>
   <div class="container">
   </div>
   <script>
      //==================================================================================================//
      //–ó–∞–¥–∞—á–∞ 1. –î–∞–Ω–æ –∫–ª–∞—Å PhoneNumber. –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –¥–æ string, –ø—Ä–∏ —è–∫–æ–º—É –Ω–∞ –æ—Å–Ω–æ–≤—ñ –Ω–æ–º–µ—Ä–∞ –≤–∏–≤–æ–¥–∏—Ç—å—Å—è –æ–ø–µ—Ä–∞—Ç–æ—Ä (050‚Ä¶.  ü°™ MTC, 096‚Ä¶ ü°™ Kyivstar, ‚Ä¶.)
      
      const initData = { id: 1, phone: '0504760198' }

      const operatorCodesOdj = {
         vodafone: ['50', '66', '95', '99'],                 // –∑ —Ü–∏–º –Ω—É–ª–µ–º –Ω–∞ –ø–æ—á–∞—Ç–∫—É –Ω–∞–º—É—á–∏–≤—Å—è, —Ä–∞–Ω—ñ—à–µ –Ω–µ –∑—ñ—à—Ç–æ–≤—Ö—É–≤–∞–≤—Å—è –∑ —Ç–∞–∫–æ—é –ø—Ä–æ–±–ª–µ–º–æ—é
         kyivstar: ['39', '67', '68', '96', '97', '98'],
         lifecell: ['63', '93', '73'],
      }

      class PhoneNumber {
         constructor(initData, operatorCodesOdj) {
            Object.assign(this, initData)
            this.operatorCodesOdj = operatorCodesOdj
         }

         getMobileOperatorCode() {
            return this.phone.trim().substring(1, 3)
         }

         getOperator() {
            let result = null
            const phoneCode = this.getMobileOperatorCode()

            for (const operator in this.operatorCodesOdj) {
               if (this.operatorCodesOdj[operator].includes(phoneCode)) {
                  result = operator
                  break
               }
            }

            if (result)
               return result
            else throw new Error('–û–ø–µ—Ä–∞—Ç–æ—Ä–∞ –∑ —Ç–∞–∫–∏–º –∫–æ–¥–æ–º –Ω–µ —ñ—Å–Ω—É—î')
         }
                                    //—Ü–µ–π –º–µ—Ç–æ–¥ –≤–ª–∞—Å–Ω–µ –Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω, —Ç–∞ –∑–∞–ª–∏—à—É  –¥–ª—è —Å–µ–±–µ
         getCodes() {              // –±—É–ª–∞ –∑–∞–¥—É–º–∫–∞, —â–æ —è–∫—â–æ –≤–≤–æ–¥–∏—Ç—å—Å—è –Ω–æ–º–µ—Ä —Ç–æ —Ü–µ —Ç–∏–ø number, –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞, –∞ —è–∫—â–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä (—Ü–µ —Ç–∏–ø string) —Ç–æ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –∫–æ–¥—ñ–≤, —Ç–∞ —â–æ—Å—å —è–∫ –∑–∞–≤–∂–¥–∏ –ø—ñ—à–ª–æ –Ω–µ –ø–æ –ø–ª–∞–Ω—É, —Ç–∞ —ñ –∑—Ä–æ–∑—É–º—ñ–≤ —â–æ –∑–∞–≤–¥–∞–Ω–Ω—è –≤–∏–º–∞–≥–∞—î —ñ–Ω–∞–∫—à–æ–≥–æ) —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Ü–µ –≤ –º–µ—Ç–æ–¥—ñ [Symbol.toPrimitive] –Ω–µ –≤–∏–π—à–ª–æ:))
            let result = null

            for (const operator in this.operatorCodesOdj) {
               if (operator === this.phone.trim().toLowerCase())
                  result = this.operatorCodesOdj[operator]
            }

            if (result)
               return result
            else throw new Error('–û–ø–µ—Ä–∞—Ç–æ—Ä–∞ –∑ —Ç–∞–∫–∏–º —ñ–º–µ–Ω–µ–º –Ω–µ —ñ—Å–Ω—É—î')
         }

         [Symbol.toPrimitive](hint) {
            let result

            switch (hint) {
               case 'number':
                  result = this.phone
                  break;

               case 'string':
                  result =  `${this.phone} - ${this.getOperator()}` 
            }
            return result
         }
      }

      const phoneNumber = new PhoneNumber(initData, operatorCodesOdj)

      console.log(+phoneNumber);
      console.log(String(phoneNumber));
      //==================================================================================================//
      
   </script>

</body>

</html>