<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <link rel="stylesheet" href="../css/style.css">
   <title>Document</title>
</head>

<body>

   <h1>
      Задача 1. Описати масив об’єктів – сайтів розроблених компанією з такими властивостями
   </h1>
   <script>

      //Масив обʼєктів
      let companyName1 = 'TECO'
      let companyName2 = 'ROSHEN'
      let companyName3 = 'NIKE'
      let companyName4 = 'AVEC'

      const sitesList = [
         {
            companyName1,
            companyOwner: 'Petrov',
            sponsors: [
               {
                  secondName: 'Freeman',
                  firstName: 'Morgan',
                  sponsorInvestment: 100200,
               },
               {
                  secondName: 'Freeman',
                  firstName: 'Morgan',
                  sponsorInvestment: 10020,
               },
               {
                  secondName: 'Freeman',
                  firstName: 'Morgan',
                  sponsorInvestment: 10020,
               },
            ],
            publicationYear: 2007,
            webSitePrice: 70000,

         },
         {
            companyName2,
            companyOwner: 'Ivanov',
            sponsors: [
               {
                  secondName: 'Dorn',
                  firstName: 'Ivan',
                  sponsorInvestment: 100,
               },
               {
                  secondName: 'Dorn',
                  firstName: 'Ivan',
                  sponsorInvestment: 100,
               },
               {
                  secondName: 'Dorn',
                  firstName: 'Ivan',
                  sponsorInvestment: 100,
               },
            ],
            publicationYear: 2011,
            webSitePrice: 2000,

         },
         {
            companyName3,
            companyOwner: 'Poliakova',
            sponsors: [
               {
                  secondName: 'Trump',
                  firstName: 'Donald',
                  sponsorInvestment: 100300,
               },
               {
                  secondName: 'Trump',
                  firstName: 'Donald',
                  sponsorInvestment: 100300,
               },
               {
                  secondName: 'Trump',
                  firstName: 'Donald',
                  sponsorInvestment: 100300,
               },
            ],
            publicationYear: 2002,
            webSitePrice: 1000,

         },
         {
            companyName4,
            companyOwner: 'Shevchenko',
            sponsors: [
               {
                  secondName: 'Kolombo',
                  firstName: 'Jast Kolombo',
                  sponsorInvestment: 100400,
               },
               {
                  secondName: 'Ursula',
                  firstName: 'Fonderlian',
                  sponsorInvestment: 100400,
               },
               {
                  secondName: 'Juja',
                  firstName: 'Mark',
                  sponsorInvestment: 10040,
               },
            ],
            publicationYear: 2016,
            webSitePrice: 50000,
         }
      ]
      console.log(sitesList)

      //==========================================================================================================================================
      //1) загальну вартість усіх сайтів

      let totalAllWebSitesCost = sitesList.reduce(
         (totalPrice, webSite) => totalPrice + webSite.webSitePrice,
         0
      )

      document.write(`Загальна вартість усіх сайтів : ${totalAllWebSitesCost}<br>`)

      //==========================================================================================================================================
      //2) кількість сайтів, що було зроблено між 2000 та 2009 рр.

      let webSitesNumberMadeInRange = sitesList.reduce(
         (sitesNumberMadeInRange, webSite) => (webSite.publicationYear > 2000 && webSite.publicationYear < 2009) ? sitesNumberMadeInRange + 1 : sitesNumberMadeInRange,
         0
      )

      document.write(`Kількість сайтів, що було зроблено між 2000 та 2009 рр. : ${webSitesNumberMadeInRange}<br>`)

      //==========================================================================================================================================
      //3) кількість сайтів, де сума спонсорських вкладень була більшою за 100000 
      //Читабельність виглядає так собі)) мені в будь якому випадку прийшлось би тут загрузнути

      const necessarySponsorInvestment = 100000

      let webSitesNumberWithNecessarySponsorInvestment = sitesList.reduce(
         (totalWebSitesNumber, website) => totalWebSitesNumber + website.sponsors.reduce(
            (totalNumberSponsorsInvestment, sponsor) => sponsor.sponsorInvestment > necessarySponsorInvestment ? totalNumberSponsorsInvestment + 1 : totalNumberSponsorsInvestment,
            0
         ),
         0
      )

      document.write(`Кількість сайтів, де сума спонсорських вкладень була більшою за 100000  : ${webSitesNumberWithNecessarySponsorInvestment}<br>`)

      //==========================================================================================================================================
      //   //4) створити загальний список усіх спонсорів (поки можуть повторюватись, просто зібрати усі у масив)

      function getGeneralSponsorsList(websites) {
               let sponsorsList = []


        for (const site of websites) {
          for (const sponsor of site.sponsors) {
            let fullName = {
               secondName : sponsor.secondName,
               firstName : sponsor.firstName
        }

            sponsorsList.push(fullName)
          }

        }
        return sponsorsList
      }

      let generalSponsorsList = getGeneralSponsorsList(sitesList) // поки що залишу так
      document.write(`Список спонсорів ${generalSponsorsList}`)
      console.log(generalSponsorsList);



      //let generalSponsorsList = sitesList.reduce(
      //   (sponsorsList, webSite) => sponsorsList.concat(webSite.sponsors), []        // виконав за допомогою reduce в завданні №3

      //   )
      //document.write(generalSponsorsList)
      //console.log(generalSponsorsList);

      //function showObject(array) {                  //Ну  поперше можна вивести саме ті властивості які ми шукаємо
      //   for (const fullName of array) {
      //      document.write(`Імʼя спонсора: ${fullName.firstName}<br>`)
      //      document.write(`Прізвище спонсора: ${fullName.secondName}<br>`)
      //   }

      //}

      //showObject(generalSponsorsList)

      //let fullNameSponsorsList = generalSponsorsList.forEach(
      //   sponsor => document.write(`Імʼя спонсора: ${sponsor.firstName}, Прізвище спонсора: ${sponsor.secondName}<br>`)
      //)

      //document.write(fullNameSponsorsList)

//==========================================================================================================================================
   //5) знайти рік, коли прибуток був найбільшим

   function getYearWithLargestProfit(sitesList) {

         let yearWithLargestProfit = sitesList.reduce(
            (maxProfit, webSite) => maxProfit.webSitePrice > webSite.webSitePrice ? maxProfit : webSite
         )
         return yearWithLargestProfit.publicationYear
      }

      document.write(`Рік, коли прибуток був найбільшим: ${getYearWithLargestProfit(sitesList)}<br>`)

//==========================================================================================================================================
   //6) упорядкувати список за спаданням прибутку

      const copyOfSitesList = JSON.parse(JSON.stringify(sitesList))
      console.log(copyOfSitesList);

         copyOfSitesList.sort(
            (webSite1, webSite2) => webSite2.webSitePrice - webSite1.webSitePrice
            ) 
      
      console.log(copyOfSitesList );

//==========================================================================================================================================
   //7) Створити 2 окремих списки з копіями об’єктів, що містять сайти з вартість до 10000 і більше 10000

      let priceNumber = 10000

      function getMorePriceNumberList(array, priceNumber) {
         const morePriceNumberList = []
               
         for (const webSite of array) {
            
            if (webSite.webSitePrice > priceNumber)

               morePriceNumberList.push(JSON.parse(JSON.stringify(webSite)))
            
         }
         return  morePriceNumberList
      }

      function getLessPriceNumberList(array, priceNumber) {
         const lessPriceNumberList = []
               
         for (const webSite of array) {
            
            if (webSite.webSitePrice <= priceNumber)
               lessPriceNumberList.push(JSON.parse(JSON.stringify(webSite)))
            
         }
         return  lessPriceNumberList
      }

      const morePriceNumberList = getMorePriceNumberList(sitesList, priceNumber)
      const lessPriceNumberList = getLessPriceNumberList(sitesList, priceNumber)
      console.log(morePriceNumberList);

      function showObjectList(array) {
         for (const object of array) {
            for (const key in object) {

               document.write(` ${key} : ${object[key]} <br>` ) // можна було глибше вивести, цікаво було спробувати, для цього напевно і вигадали toString з наступного заняття, хотів ще два цих масиви засунути в один обʼєкт та передумав:)))
            }
         }
      }

      document.write(`Список сайтів ціна яких вище за ${priceNumber} : ${getMorePriceNumberList(sitesList, priceNumber)}<br>`)
      document.write(`Список сайтів ціна яких нижче за ${priceNumber} : ${getLessPriceNumberList(sitesList, priceNumber)}<br>`)

      document.write(showObjectList(morePriceNumberList))

//==========================================================================================================================================

   </script>

</body>

</html>